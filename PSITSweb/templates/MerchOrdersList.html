{% extends 'base.html' %}
{% block content %}
  <! -- This is for the background -->
  <div class="ann_bg_1"></div>
  <div class="ann_bg_2"></div>
  <! -- This is for the background -->

  <div>
    <div class="information_container">

      <div class="information_content">
        <h1>Orders List</h1>
      </div>

        <div class="information_menu">
        <form action="" method="get">
          <div class="menu_item">
            <button type="reset" onclick="home()">PSITS</button>
            <button type="submit">Search</button>
            <input id="search_student" style="width: 40ch;" type="text" name="search" placeholder="SEARCH REF # | STATUS">
          </div>
        </form>

        </div>
        <br>
        <div class="information_content">
          <div class="menu_item">
            <h1 style="color: aqua;"> Orders: â‚±{{'%0.2f'| format(reserve|float)}}  |  Total: â‚±{{'%0.2f'| format(paid|float)}}/{{'%0.2f'| format(total|float)}}  </h1>
          </div>
          <table>
            <thead>
              <tr>
                <th>REF #</th>
                <th>NAME</th>
                <th>PRODUCT</th>
                <th>QUANTITY</th>
                <th>AMOUNT</th>
                <th>STATUS</th>
                <th>ACTION</th>
              </tr>
            </thead>
            <tbody>

              {% for order in ORDERS %}
              <form method="post" action="">
                <tr>
                  <input name="order_ref" id="{{order.order.uid}}idnum" type="text" value="{{order.reference}}" hidden>
                  <td><input name="ref" id="{{order.order.uid}}ref" type="text" value="{{order.reference}}" disabled></td>
                  <td><input name="name" id="{{order.order.uid}}name" type="text" value="{{order.account.lastname}}, {{order.account.firstname}}" disabled></td>
                  <td><input name="prod" id="{{order.order.uid}}prod" type="text" value="{{order.merch.title}}" disabled></td>
                  <td><input name="qty" id="{{order.order.uid}}qty" type="text" value="{{order.order.quantity}}" disabled></td>
                  <td><input name="amt" id="{{order.order.uid}}amt" type="text" value="P{{'%0.2f'| format((order.getTotal() * order.order.quantity)|float)}}" disabled></td>
                  {% if order.getStatus() == 'ORDERED' %}
                  <td>
                    <select name="status" id="{{order.order.uid}}status" disabled>
                        <option value="ORDERED" selected>ORDERED</option>
                        <option value="PAID">PAID</option>
                      </select>
                  </td>
                  {% elif order.getStatus() == 'PAID' %}
                  <td>
                    <select name="status" id="{{order.order.uid}}status" disabled>
                        <option value="PAID" selected>PAID</option>
                        <option value="CLAIMED">CLAIMED</option>
                      </select>
                  </td>
                  {% else %}
                  <td>
                    <select name="status" id="{{order.order.uid}}status" disabled>
                        <option value="CLAIMED" selected>CLAIMED</option>
                      </select>
                  </td>
                  {% endif %}
                  <td><a id="{{order.order.uid}}edit" onclick="editOrderStatus({{order.order.uid}})">âœŽ</a><button id="{{order.order.uid}}button" type="submit" hidden>ðŸ’¾</button></td>
                </tr>
              </form>
              {% endfor %}


            </tbody>
          </table>
        </div>

      <br>
      <br>
      <br>
      <br>
      <p style="text-align: center; color: white;">To avoid human error in transaction data, the delete action was removed. (Delete data from MySQL server manually)</p>
      <hr>
      <p style="text-align: center; color: white;">PSITS &copy; 2022 - Developed by <a style="color: aqua;" href="">Abejar and Company</a></p>

    </div>

  </div>
{% endblock %}